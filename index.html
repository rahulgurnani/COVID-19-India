<!DOCTYPE html>
<meta charset="utf-8">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<h2>
  Distribution of number of people having COVID-19 in India
</h2>
<style>
  .slider {
    margin-top: 100px;
  }

  div.timeline {
    width: 200px;
    margin-left: 400px;
  }
</style>

<body>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>
  <script src="util.js"></script>
  <script src="https://rawgit.com/Anujarya300/bubble_maps/master/data/geography-data/datamaps.none.js"></script>
  <div id="india" style="height: 600px; width: 900px;"></div>
  <div class="timeline" id="slidercontainer">
    <input type="range" class="slider" id="daterange" onchange="updateDate(this.value)" oninput="updateDate(this.value)"
      name="ad">
    <p>As on : <span id="date"></span></p>
  </div>
  <div id="output">
  </div>
  <script>

    function createMap() {
      bubble_map = new Datamap({
        element: document.getElementById('india'),
        scope: 'india',
        geographyConfig: {
          popupOnHover: true,
          highlightOnHover: true,
          borderColor: '#444',
          borderWidth: 0.5,
          dataUrl: 'https://rawgit.com/Anujarya300/bubble_maps/master/data/geography-data/india.topo.json'
          //dataJson: topoJsonData
        },
        fills: {
          'MAJOR': '#306596',
          'MEDIUM': '#0fa0fa',
          'MINOR': '#bada55',
          defaultFill: '#dddddd'
        },
        setProjection: function (element) {
          var projection = d3.geo.mercator()
            .center([78.9629, 23.5937]) // always in [East Latitude, North Longitude]
            .scale(1000);
          var path = d3.geo.path().projection(projection);
          return { path: path, projection: projection };
        }
      });
    }
    createMap();

    var csvurl = "https://raw.githubusercontent.com/rahulgurnani/COVID-19-India/master/data/statewise.csv";
    var rawData = getText(csvurl);
    dateOutput = document.getElementById("date");
    dateRange = document.getElementById("daterange");
  </script>
</body>

</html>